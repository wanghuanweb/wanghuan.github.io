#### 1.Ajax 是什么? 如何创建一个Ajax？请尽可能详尽的解释 Ajax 的工作原理？使用 Ajax 都有哪些优劣？

**ajax是什么**

1.AJAX = 异步 JavaScript 和 XML。
2.AJAX 是一种用于创建快速动态网页的技术。
3.通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。

**XMLHttpRequset对象**

ajax的核心是XMLHttpRequest对象(IE5和IE6使用ActiveXObject)
创建XMLHttpRequest对象，XMLHttpRequest 对象用于和服务器交换数据。

```
var xhr;

if(window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
} else{
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
}
```

**ajax向服务器发送请求**

如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法
open(method,url,async);-启动请求，以备发送。规定请求的类型，url以及是否异步处理请求。
   method：请求的类型；GET 或 POST
   url：文件在服务器的位置
   asycn：true是异步，false是同步
send(string);--将请求发送到服务器。
   string:仅用于post请求

**服务器响应**

收到服务器响应后，响应数据会自动填充XHR对象的以下属性。
responseText：获得字符串形式的响应数据
responseXML：获得 XML 形式的响应数据
status：响应的HTTP状态
statusText：HTTP状态的说明

收到响应后，第一个检查的是status属性，以确定响应已经成功返回。一般可以让状态码200作为成功的标记，这时respomseText和responseXML都可以访问了。但若状态码是304表示资源未被修改，可以直接使用浏览器的缓存版本。这样都是响应成功的意思。代码如下：
```
if((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304){
    alert(xhr.responseText);
} else {
    alert("Request was unsuccessful:" + xhr.status);
}
```

status：
200: "OK"
403   （禁止） 服务器拒绝请求。
404   （未找到） 服务器找不到请求的网页。
408  （请求超时） 服务器等候请求时发生超时。
500   （服务器内部错误）  服务器遇到错误，无法完成请求。

**onreadystatechange事件**

我们一般都是发送异步请求，才能让js继续执行不必等待响应。此时，可以检测XHR对象的readyState属性，此属性表示当前请求/响应所处的阶段。
readyState：
属性存有 XMLHttpRequest 的状态信息：
0: 请求未初始化。尚未调用open方法
1: 启动。已经调用open方法，但没调用send方法
2: 发送。已经调用send方法，但尚未接收到响应。
3: 接收。已经接收到部分响应数据。
4: 完成。已经接收到全部响应数据，而且已经可以在客户端使用了。

每当readyState状态改变的时候，会触发onreadystatechange事件，可利用此事件来检测每次状态变化后readystate的值。

在 onreadystateChange 事件中，我们规定当服务器响应已做好被处理的准备时所执行的任务。
当 readyState 等于 4表示所有数据已经就绪。
```
xhr.onreadystateChange = function() {
    if(xhr.readyState == 4) {
        if((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304){
            alert(xhr.responseText);
        } else {
            alert("Request was unsuccessful:" + xhr.status);
        }
    }
}
```

ajax异步请求的步骤：
(1)创建XMLHttpRequest对象,也就是创建一个异步调用对象
(2)创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息
(3)设置响应HTTP请求状态变化的函数
(4)发送HTTP请求
(5)获取异步调用返回的数据
(6)使用JavaScript和DOM实现局部刷新

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>
function loadXMLDoc()
{
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		// IE6, IE5 浏览器执行代码
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
		}
	}
	xmlhttp.open("GET","/try/ajax/ajax_info.txt",true);
	xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>使用 AJAX 修改该文本内容</h2></div>
<button type="button" onclick="loadXMLDoc()">修改内容</button>

</body>
</html>
```
**ajax的优缺点**

优点：
1.无刷新更新数据。
2.异步与服务器通信。AJAX使用异步方式与服务器通信，不需要打断用户的操作，具有更加迅速的响应能力。
3.减少带宽的使用并增加速度
AJAX使用客户端脚本来和web服务器通讯，用JavaScript来交互数据。使用AJAX能减少网路负载和带宽使用并且只获得你所需的数据。这样能给你更快的接口和更低的响应时间。响应更快因此性能和速度增加了

缺点：
1.AJAX大量的使用了javascript和ajax引擎,这些取决于浏览器的支持.在编写的时候考虑对浏览器的兼容性.
2.AJAX只是局部刷新,所以页面的后退按钮是没有用的.
3.增加Web服务器的负载-如果你增加一个自动更新的功能，它每隔几秒向服务发起请求，那么就会增加服务器的负载。

#### 2.什么是跨域资源共享 (CORS)？它用于解决什么问题？

CORS它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。

#### 3.ajax处理跨域有几种方式？实现原理是什么？

http:// www . google : 8080 / script/jquery.js
http:// （协议号） www  （子域名）google （主域名）8080 （端口号）
只要协议、域名 、端口有任何一个不同, 都被当作是 不同 的域。




jquery ajax中都支持哪些返回类型？xml，html，json，jsonp
#### 1.如何解决跨域问题?js跨域请求的方式



怎么跨域
Jasonp跨域

**js跨域请求的方式**

1、通过jsonp跨域
2、通过修改document.domain来跨子域
3、使用window.name来进行跨域
4、使用HTML5中新引进的window.postMessage方法来跨域传送数据（ie 67 不支持）
5、CORS 需要服务器设置header ：Access-Control-Allow-Origin。
6、nginx反向代理 这个方法一般很少有人提及，但是他可以不用目标服务器配合，不过需要你搭建一个中转nginx服务器，用于转发请求


##### 47. 请解释 JSONP 的工作原理，以及它为什么不是真正的 Ajax。
